<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üåø PhytoPulse 2025</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      margin: 0;
      font-family: "Poppins", sans-serif;
      background: radial-gradient(circle at center, #001100, #000);
      color: #ccffcc;
      overflow-x: hidden;
    }
    header {
      text-align: center;
      padding: 60px 20px;
      background: linear-gradient(90deg, #00ff88, #00ccff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-size: 3rem;
      font-weight: 800;
      animation: neon 2s infinite alternate;
    }
    @keyframes neon {
      from { text-shadow: 0 0 5px #00ff88, 0 0 10px #00ff88; }
      to { text-shadow: 0 0 20px #00ffff, 0 0 40px #00ffff; }
    }

    section {
      padding: 60px 20px;
      text-align: center;
      opacity: 0;
      transform: translateY(50px);
      transition: all 1s ease;
    }
    section.visible {
      opacity: 1;
      transform: translateY(0);
    }
    h2 { color: #00ffcc; font-size: 2rem; margin-bottom: 10px; }

    canvas { width: 90%; max-width: 700px; height: 350px; margin-top: 20px; }

    /* Alert Popup */
    #alertPopup {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: rgba(0, 255, 153, 0.2);
      border: 2px solid #00ff88;
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 0 15px #00ff88;
      color: #ccffcc;
      display: none;
      width: 280px;
      text-align: center;
      backdrop-filter: blur(8px);
      z-index: 999;
      animation: fadein 1s ease;
    }
    @keyframes fadein {
      from { opacity: 0; transform: translateY(40px); }
      to { opacity: 1; transform: translateY(0); }
    }
    #alertAction {
      background: #00ff99;
      color: #000;
      border: none;
      padding: 8px 15px;
      border-radius: 10px;
      margin-top: 10px;
      cursor: pointer;
      font-weight: bold;
      transition: 0.3s;
    }
    #alertAction:hover { background: #00ffaa; }

    footer {
      text-align: center;
      padding: 40px 20px;
      color: #66ffcc;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <header>üåø PhytoPulse 2025</header>

  <section>
    <h2>How It Works</h2>
    <p>PhytoPulse senses plant signals ‚Äî monitoring stress, hydration, and pest activity ‚Äî using AI and bio-sensors.</p>
  </section>

  <section>
    <h2>Real-Time Plant Health</h2>
    <canvas id="plantChart"></canvas>
  </section>

  <div id="alertPopup">
    <h3 id="alertTitle"></h3>
    <p id="alertMessage"></p>
    <button id="alertAction"></button>
  </div>

  <footer>¬© 2025 PhytoPulse ‚Äî Connecting Nature with Intelligence üå±</footer>

  <script>
    // üåø Scroll Animation
    const observer = new IntersectionObserver(entries => {
      entries.forEach(e => {
        if (e.isIntersecting) e.target.classList.add("visible");
        else e.target.classList.remove("visible");
      });
    }, { threshold: 0.2 });
    document.querySelectorAll("section").forEach(el => observer.observe(el));

    // üß† Chart + Alert System
    const ctx = document.getElementById("plantChart").getContext("2d");
    const labels=[], heat=[], drought=[], stress=[], pest=[];
    const chart = new Chart(ctx, {
      type: "line",
      data: {
        labels,
        datasets: [
          { label: "Heat Stress", data: heat, borderColor: "#ff4444", backgroundColor: "rgba(255,68,68,0.2)", tension: 0.3, fill: true },
          { label: "Drought Stress", data: drought, borderColor: "#ffaa00", backgroundColor: "rgba(255,170,0,0.2)", tension: 0.3, fill: true },
          { label: "General Stress", data: stress, borderColor: "#00ff99", backgroundColor: "rgba(0,255,153,0.2)", tension: 0.3, fill: true },
          { label: "Pest Activity", data: pest, borderColor: "#66ccff", backgroundColor: "rgba(102,204,255,0.2)", tension: 0.3, fill: true }
        ]
      },
      options: {
        scales: {
          x: { ticks: { color: "#ccffcc" }},
          y: { min: 0, max: 100, ticks: { color: "#ccffcc" }}
        },
        plugins: { legend: { labels: { color: "#ccffcc" }} }
      }
    });

    // üîä Speech
    function speakHindi(msg) {
      const u = new SpeechSynthesisUtterance(msg);
      u.lang = "hi-IN";
      u.rate = 1;
      u.pitch = 1;
      speechSynthesis.speak(u);
    }

    // üåø Smart Alert with 1-min Cooldown
    let lastAlertTime = 0;
    const cooldown = 60 * 1000; // 1 minute

    function showSmartAlert(state, msg) {
      const now = Date.now();
      if (now - lastAlertTime < cooldown) {
        console.log("‚è≥ Cooldown active ‚Äî skipping alert");
        return;
      }
      lastAlertTime = now;

      const popup = document.getElementById("alertPopup");
      const title = document.getElementById("alertTitle");
      const message = document.getElementById("alertMessage");
      const action = document.getElementById("alertAction");

      let actionText = "üåø ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä ‡§ú‡§æ‡§∞‡•Ä ‡§∞‡§ñ‡•á‡§Ç";
      if (state.includes("Drought")) actionText = "üíß ‡§™‡§æ‡§®‡•Ä ‡§¶‡•á‡§Ç";
      else if (state.includes("Heat")) actionText = "üå§ ‡§õ‡§æ‡§Ø‡§æ ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡•á‡§Ç";
      else if (state.includes("Pest")) actionText = "üêõ ‡§ï‡•Ä‡§ü‡§®‡§æ‡§∂‡§ï ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç";

      title.innerHTML = "üö® " + state;
      message.innerHTML = msg + "<br><small>‚è≥ ‡§Ö‡§ó‡§≤‡§æ ‡§Ö‡§≤‡§∞‡•ç‡§ü 1 ‡§Æ‡§ø‡§®‡§ü ‡§¨‡§æ‡§¶...</small>";
      action.innerText = actionText;
      action.onclick = () => speakHindi(actionText);

      popup.style.display = "block";
      speakHindi(msg + " " + actionText);
      setTimeout(() => popup.style.display = "none", 7000);
    }

    // üìà Simulated Real-time Data
    function updateChart() {
      const now = new Date().toLocaleTimeString();
      if (labels.length > 15) { labels.shift(); heat.shift(); drought.shift(); stress.shift(); pest.shift(); }
      labels.push(now);
      heat.push(Math.random() * 100);
      drought.push(Math.random() * 100);
      stress.push(Math.random() * 100);
      pest.push(Math.random() * 100);
      chart.update();

      if (heat.at(-1) > 85) showSmartAlert("Heat Stress", "üå§ ‡§§‡§æ‡§™‡§Æ‡§æ‡§® ‡§¨‡§π‡•Å‡§§ ‡§Ö‡§ß‡§ø‡§ï ‡§π‡•à!");
      else if (drought.at(-1) > 85) showSmartAlert("Drought Stress", "üíß ‡§™‡•å‡§ß‡•ã‡§Ç ‡§ï‡•ã ‡§™‡§æ‡§®‡•Ä ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à!");
      else if (stress.at(-1) > 85) showSmartAlert("Plant Stress", "üå± ‡§™‡•å‡§ß‡•ã‡§Ç ‡§™‡§∞ ‡§§‡§®‡§æ‡§µ ‡§¶‡•á‡§ñ‡§æ ‡§ó‡§Ø‡§æ!");
      else if (pest.at(-1) > 85) showSmartAlert("Pest Attack", "üêõ ‡§ï‡•Ä‡§ü ‡§π‡§Æ‡§≤‡§æ ‡§™‡§æ‡§Ø‡§æ ‡§ó‡§Ø‡§æ!");
    }

    setInterval(updateChart, 5000);
  </script>
</body>
</html>
