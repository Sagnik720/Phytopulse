<!DOCTYPE html>
<html lang="en">
<head>
<link rel="stylesheet" href="style.css" />

<style>
  html {
    scroll-behavior: smooth;
  }

  /* Fade-in animation */
  .fade-section {
    opacity: 0;
    transform: translateY(40px);
    transition: opacity 1.2s ease-out, transform 1.2s ease-out;
  }

  .fade-section.visible {
    opacity: 1;
    transform: translateY(0);
  }
</style>

<script>
  // Wait until the DOM is ready
  document.addEventListener("DOMContentLoaded", () => {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
  entry.target.classList.add("visible");
} else {
  entry.target.classList.remove("visible"); // allow re-animation on scroll up
}

      });
    }, { threshold: 0.2 });

    // Apply fade animation to all main sections
    document.querySelectorAll("section, .benefit-grid, .card, .hero-content").forEach(el => {
      el.classList.add("fade-section");
      observer.observe(el);
    });
  });
</script>


  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PhytoPulse тАФ Plant Emotion Network</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" type="image/png" href="phytopulse.png">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
</head>
<body>

  <!-- Navbar -->
  <header class="navbar">
    <div class="logo">
      <img src="phytopulse.png" alt="PhytoPulse Logo" />
      <span>PhytoPulse</span>
    </div>
    <nav>
      <ul>
        <li><a href="#about">About</a></li>
        <li><a href="#model">AI Model</a></li>
        <li><a href="#technology">Technology</a></li>
        <li><a href="#benefits">Benefits</a></li>
        <li><a href="#insights">Insights</a></li>
      </ul>
    </nav>
  </header>

  <!-- Hero Section -->
  <section class="hero">
    <div class="overlay"></div>
    <div class="hero-content">
      <h1>Giving Plants a Voice</h1>
      <p>Discover how PhytoPulse translates plant bio-signals into insights using AI and neuroscience.</p>
      <a href="#insights" class="btn">Explore Dashboard</a>
    </div>
  </section>

  <!-- About Section -->
  <section id="about" class="about">
    <h2>About PhytoPulse</h2>
    <p>
      PhytoPulse bridges neuroscience, plant biology, and AI to decode plant communication. 
      Our bioelectrode patches detect subtle plant signals тАФ revealing stress, emotion, and adaptation long before visible symptoms appear.
    </p>
  </section>

  <!-- AI Model Development Section -->
  <section id="model" class="model-section">
    <h2>AI Model Development</h2>
    <p>
      The collected plant bio-signal data is used to train a machine learning model тАФ 
      the intelligent "brain" of PhytoPulse. This model learns to recognize the unique 
      electrical fingerprint of each stressor, such as heat, drought, or pest attacks.
    </p>
    <p>
      Inspired by neuroscience and EEG signal processing, our system interprets 
      microvolt-level plant responses to detect stress long before visible symptoms appear.
    </p>
    <p>
      <strong>Validation:</strong> Each trained model is rigorously tested on unseen data 
      to ensure high predictive accuracy, sensitivity, and specificity тАФ delivering 
      reliable early alerts to farmers and researchers.
    </p>
  </section>

  <!-- Technology Section -->
<section id="technology" class="technology" 
  style="
    position: relative;
    background: url('https://i.ibb.co/BHwX4P5W/beautiful-fern-leaves-black-background.jpg') no-repeat center center/cover;
    color: #fff;
    text-align: center;
    padding: 120px 40px;
    overflow: hidden;
  ">
  
  <!-- Overlay for better readability -->
  <div style="
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.55);
    z-index: 0;
  "></div>

  <!-- Text Content -->
  <div style="
    position: relative;
    z-index: 1;
    max-width: 800px;
    margin: 0 auto;
    font-family: 'Poppins', sans-serif;
  ">
    <h2 style="color:#00ff99; font-size:2.2em; margin-bottom:20px;">
      How It Works
    </h2>
    <p style="color:#e0ffe0; font-size:1.1em; line-height:1.6;">
      Our AI-driven sensors capture real-time electrical patterns from plants. 
      These bio-signals are analyzed to identify conditions such as heat stress, drought, pest attacks, 
      and nutrient deficiencies тАФ days before they are visible.
    </p>
  </div>
</section>


  <!-- Benefits Section -->
  <section id="benefits" class="benefits">
    <h2>Why PhytoPulse?</h2>
    <div class="benefit-grid">
      <div class="card">
        <h3>Early Detection</h3>
        <p>Predict stress days before symptoms appear тАФ preventing 30тАУ60% yield loss.</p>
      </div>
      <div class="card">
        <h3>Eco-Friendly</h3>
        <p>Completely non-invasive and sustainable sensing system for all crops.</p>
      </div>
      <div class="card">
        <h3>Smart Insights</h3>
        <p>Farmers receive real-time updates and adaptive recommendations.</p>
      </div>
    </div>
  </section>

  <!-- Insights Section -->
  <section id="insights" class="insights">
    <h2>Live Plant Communication Dashboard</h2>
    <p>Visualize live data patterns and AI analysis as plants respond to their environment.</p>

    <div style="width:80%;max-width:700px;margin:50px auto;text-align:center;">
      <h3 style="color:#00ff99;">ЁЯУК Real-Time Plant Signal Graph</h3>
      <canvas id="plantChart" width="700" height="350" 
              style="background:#0a1a0a;border-radius:15px;box-shadow:0 0 20px #00ff99;"></canvas>
    </div>

    <div id="plant-data" style="margin:40px;color:#00ff99;font-family:Poppins;"></div>
  </section>

  <!-- ЁЯМ┐ Simulated Signal Patterns -->
  <div style="width:85%;max-width:900px;margin:60px auto;text-align:center;">
    <h2 style="color:#00ff99;">ЁЯМ┐ Simulated Plant Signal Patterns</h2>
    <canvas id="pythonSimChart" width="800" height="400"
            style="background:#0a1a0a;border-radius:15px;box-shadow:0 0 20px #00ff99;"></canvas>
  </div>

  <!-- ЁЯМ╛ Smart Farmer Alert (Hindi Voice) -->
  <div id="alertPopup" style="
    display:none; position:fixed; bottom:30px; right:30px;
    background:rgba(0,0,0,0.85); border-left:6px solid #00ff99;
    padding:20px 25px; color:#fff; font-family:Poppins,sans-serif;
    font-size:16px; border-radius:12px; box-shadow:0 0 20px #00ff99;
    z-index:9999; max-width:360px;">
    <strong id="alertTitle">ЁЯМ┐ рдкреМрдзреЛрдВ рдХреА рдЪреЗрддрд╛рд╡рдиреА</strong>
    <p id="alertMessage" style="margin:10px 0;"></p>
    <button id="alertAction" style="
      background:#00ff99;color:#000;font-weight:bold;
      border:none;border-radius:8px;padding:8px 14px;
      margin-top:10px;cursor:pointer;">рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХрд░реЗрдВ</button>
  </div>

  <style>
  @keyframes fadeIn { from {opacity:0;transform:translateY(20px);} to {opacity:1;transform:translateY(0);} }
  @keyframes fadeOut { from {opacity:1;transform:translateY(0);} to {opacity:0;transform:translateY(20px);} }
  </style>

  <script>
  // Load TensorFlow.js model
  let model;
async function loadModel() {
  try {
    model = await tf.loadLayersModel('tfjs_model/model.json');
    console.log("тЬЕ AI Model Loaded");
  } catch (error) {
    console.error("тЭМ Error loading model:", error);
  }
}
loadModel();

// ===============================
// ЁЯУИ Live Chart Setup
// ===============================
const ctx = document.getElementById('plantChart').getContext('2d');
const timeLabels = [];
const signalData = [];
const chart = new Chart(ctx, {
  type: 'line',
  data: {
    labels: timeLabels,
    datasets: [{
      label: 'Signal Strength (V)',
      data: signalData,
      borderColor: '#00ff99',
      backgroundColor: 'rgba(0,255,153,0.2)',
      fill: true,
      tension: 0.3,
      pointRadius: 2
    }]
  },
  options: {
    scales: {
      x: { title: { display: true, text: 'Time', color: '#00ff99' }, ticks: { color: '#ccffcc' } },
      y: { title: { display: true, text: 'Signal Voltage (V)', color: '#00ff99' }, ticks: { color: '#ccffcc' }, min: 0, max: 5 }
    },
    plugins: { legend: { labels: { color: '#00ff99' } } }
  }
});

// ===============================
// ЁЯОЩя╕П Hindi Voice Function
// ===============================
function speakHindi(msg) {
  const u = new SpeechSynthesisUtterance(msg);
  u.lang = "hi-IN";
  u.rate = 1;
  speechSynthesis.speak(u);
}

// ===============================
// тЪЩя╕П Alert System + Cooldown Logic
// ===============================
let lastAlert = "";
let cooldown = 60; // 60 seconds cooldown (1 minute)
let stableState = "Normal";

function getActionForState(state) {
  switch (state) {
    case "Drought Stress": return { color:"#ffaa00", action:"ЁЯТз рд╕рд┐рдВрдЪрд╛рдИ рдЪрд╛рд▓реВ рдХрд░реЗрдВ", voice:"рдЖрдкрдХреЗ рдкреМрдзреЗ рдкреНрдпрд╛рд╕реЗ рд╣реИрдВ, рдХреГрдкрдпрд╛ рдкрд╛рдиреА рджреЗрдВред" };
    case "Pest Attack": return { color:"#ff5555", action:"ЁЯРЫ рдХреАрдЯ рдирд┐рдпрдВрддреНрд░рдг рдХрд░реЗрдВ", voice:"рдЪреЗрддрд╛рд╡рдиреА! рдХреАрдЯ рд╣рдорд▓реЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИред" };
    case "Heat Stress": return { color:"#ff8800", action:"ЁЯМЮ рдЫрд╛рдпрд╛ рдкреНрд░рджрд╛рди рдХрд░реЗрдВ", voice:"рдкреМрдзрд╛ рдЧрд░реНрдореА рд╕реЗ рдкрд░реЗрд╢рд╛рди рд╣реИред" };
    case "Nutrient Deficiency": return { color:"#66ccff", action:"ЁЯМ▒ рдЙрд░реНрд╡рд░рдХ рдбрд╛рд▓реЗрдВ", voice:"рдкреМрдзреЛрдВ рдореЗрдВ рдкреЛрд╖рдХ рддрддреНрд╡реЛрдВ рдХреА рдХрдореА рд╣реИред" };
    case "Overwatering": return { color:"#00ccff", action:"ЁЯТз рдкрд╛рдиреА рдХрдо рдХрд░реЗрдВ", voice:"рдЕрдзрд┐рдХ рдкрд╛рдиреА рджреЗрдиреЗ рд╕реЗ рдмрдЪреЗрдВред" };
    default: return { color:"#00ff99", action:"ЁЯМ┐ рдкреМрдзрд╛ рд╕реНрд╡рд╕реНрде рд╣реИ", voice:"рдЖрдкрдХрд╛ рдкреМрдзрд╛ рд╕реНрд╡рд╕реНрде рдФрд░ рдЦреБрд╢ рд╣реИред" };
  }
}

// Popup Display
function showPopup(state, message) {
  const popup = document.getElementById("alertPopup");
  const title = document.getElementById("alertTitle");
  const msg = document.getElementById("alertMessage");
  const button = document.getElementById("alertAction");

  const { color, action, voice } = getActionForState(state);
  popup.style.borderLeft = `6px solid ${color}`;
  title.innerHTML = `ЁЯЪи ${state} рдЪреЗрддрд╛рд╡рдиреА`;
  msg.innerHTML = message + "<br><strong>рд╕реБрдЭрд╛рд╡:</strong> " + action;
  button.innerHTML = action;
  popup.style.display = "block";
  popup.style.animation = "fadeIn 0.5s ease-in-out";
  speakHindi(voice);

  button.onclick = () => {
    speakHindi(`рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХреА рдЧрдИ: ${action}`);
    popup.style.animation = "fadeOut 0.5s ease-in-out";
    setTimeout(() => popup.style.display = "none", 500);
  };

  setTimeout(() => {
    popup.style.animation = "fadeOut 0.5s ease-in-out";
    setTimeout(() => popup.style.display = "none", 500);
  }, 8000);
}

// ===============================
// ЁЯза Fetch + Stability System
// ===============================
async function fetchPlantData() {
  try {
    const res = await fetch("https://phytopulse-org.onrender.com/api/plant-data
");
    const data = await res.json();

    // Update chart
    const now = new Date().toLocaleTimeString();
    if (timeLabels.length > 20) { timeLabels.shift(); signalData.shift(); }
    timeLabels.push(now);
    signalData.push(data.signalStrength);
    chart.update();

    // Update text data
    document.getElementById("plant-data").innerHTML = `
      <h3>ЁЯМ┐ PhytoPulse Live Plant Data</h3>
      <p><strong>Moisture:</strong> ${data.moisture}%</p>
      <p><strong>Temperature:</strong> ${data.temperature}┬░C</p>
      <p><strong>Signal Strength:</strong> ${data.signalStrength} V</p>
      <p><strong>Emotion:</strong> ${data.emotion}</p>
      <p><strong>Signal State:</strong> ${data.signalState}</p>
      <p><strong>Health Status:</strong> ${data.healthStatus}</p>
      <p><strong>AI Prediction:</strong> ${data.predictedState}</p>
      <p><em>Last Updated: ${data.timestamp}</em></p>
      <p id="cooldown-display" style="color:#66ffcc;">тП│ рдЕрдЧрд▓реА рд╕реНрдерд┐рддрд┐ рдЬрд╛рдВрдЪ ${cooldown} рд╕реЗрдХрдВрдб рдореЗрдВ...</p>
    `;

    // Only trigger alert when cooldown expires
    if (cooldown <= 0 && data.alertMessage !== lastAlert) {
      stableState = data.predictedState;
      showPopup(stableState, data.alertMessage);
      lastAlert = data.alertMessage;
      cooldown = 60; // reset timer
    }

  } catch (e) {
    console.error("Error fetching:", e);
  }
}

// ===============================
// тП│ Cooldown Countdown
// ===============================
setInterval(() => {
  if (cooldown > 0) cooldown--;
  const el = document.getElementById("cooldown-display");
  if (el) {
    el.textContent = cooldown > 0
      ? `тП│ рдЕрдЧрд▓реА рд╕реНрдерд┐рддрд┐ рдЬрд╛рдВрдЪ ${cooldown} рд╕реЗрдХрдВрдб рдореЗрдВ...`
      : "тЬЕ рдирдИ рд╕реНрдерд┐рддрд┐ рдЬрд╛рдВрдЪ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реИ!";
  }
}, 1000);

// Refresh plant data every 5 seconds
setInterval(fetchPlantData, 5000);
fetchPlantData();
  </script>

  <footer>
    <p>┬й 2025 PhytoPulse </p>
  </footer>
<!-- ЁЯМ┐ Simulated Python-like Dataset Visualization -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  const plantStates = ['Normal', 'Heat Stress', 'Drought Stress', 'Pest Attack'];

  // Generate random signal pattern for each state
  function simulatePlantSignal(state) {
    let baseSignal = Array.from({ length: 100 }, () => Math.random() * 0.5);

    if (state === 'Heat Stress') {
      baseSignal = baseSignal.map((v, i) => v + Math.sin(i / 10) * 0.8);
    } else if (state === 'Drought Stress') {
      baseSignal = baseSignal.map(v => v + Math.random() * 0.4 + 0.8);
    } else if (state === 'Pest Attack') {
      baseSignal = baseSignal.map(v => v + (Math.random() > 0.9 ? 0.8 : 0));
    }

    return baseSignal;
  }

  // Generate dataset for all states
  const simulatedData = plantStates.map(state => ({
    label: state,
    data: simulatePlantSignal(state),
    borderColor:
      state === 'Normal' ? '#00ff99' :
      state === 'Heat Stress' ? '#ff5555' :
      state === 'Drought Stress' ? '#ffaa00' :
      '#8888ff',
    borderWidth: 2,
    fill: false,
    tension: 0.3
  }));

  // X-axis labels (s0...s99)
  const xLabels = Array.from({ length: 100 }, (_, i) => `s${i}`);
  const ctx2 = document.getElementById('pythonSimChart').getContext('2d');

  // Create Chart
  new Chart(ctx2, {
    type: 'line',
    data: { labels: xLabels, datasets: simulatedData },
    options: {
      responsive: true,
      plugins: {
        legend: { labels: { color: '#00ff99' } },
        title: {
          display: true,
          text: 'Simulated Electrical Signal Activity',
          color: '#00ff99'
        }
      },
      scales: {
        x: {
          ticks: { color: '#ccffcc' },
          title: { display: true, text: 'Signal Index', color: '#00ff99' }
        },
        y: {
          ticks: { color: '#ccffcc' },
          title: { display: true, text: 'Voltage (V)', color: '#00ff99' },
          min: -1,
          max: 3
        }
      }
    }
  });

  // Optional тАФ refresh simulation every 5 seconds dynamically
  setInterval(() => {
    simulatedData.forEach(d => (d.data = simulatePlantSignal(d.label)));
    Chart.getChart(ctx2)?.update();
  }, 5000);
});
</script>

<script>
document.querySelector('a[href="#insights"]').addEventListener('click', (e) => {
  e.preventDefault();
  const dashboard = document.querySelector('#insights');
  dashboard.scrollIntoView({ behavior: 'smooth' });
  setTimeout(() => {
    dashboard.style.boxShadow = '0 0 40px 10px #00ff99';
    setTimeout(() => (dashboard.style.boxShadow = ''), 1500);
  }, 1000);
});
</script>

<!-- ЁЯМ╛ Farmer Chatbot (Hindi + English, Minimized Bubble) -->
<div id="chatbot" style="
  position: fixed;
  bottom: -400px;
  left: 20px;
  background: rgba(0,0,0,0.9);
  color: white;
  padding: 15px;
  border-radius: 15px;
  width: 320px;
  font-family: Poppins, sans-serif;
  box-shadow: 0 0 15px #00ff99;
  z-index: 9999;
  transition: bottom 0.8s ease-in-out;
">
  <div style="display:flex; justify-content:space-between; align-items:center;">
    <strong>ЁЯдЦ PhytoPulse рд╕рд╣рд╛рдпрдХ</strong>
    <button id="minimize-btn" style="
      background:none;border:none;color:#00ff99;font-size:18px;cursor:pointer;">тИТ</button>
  </div>
  <div id="chat-log" style="max-height: 200px; overflow-y: auto; margin:10px 0; font-size: 14px;"></div>
  <input id="chat-input" type="text" placeholder="Type in English or Hindi..." 
    style="width: 100%; padding: 8px; border-radius: 8px; border: none; outline: none; font-size: 14px;">
  <div style="margin-top:8px; display:flex; justify-content:space-between;">
    <button id="chat-send" style="background:#00ff99; border:none; color:#000; padding:6px 10px; border-radius:6px; cursor:pointer;">
      Send
    </button>
    <button id="chat-voice" style="background:#66ccff; border:none; color:#000; padding:6px 10px; border-radius:6px; cursor:pointer;">
      ЁЯОд Speak
    </button>
  </div>
</div>

<!-- ЁЯМ▒ Floating Chat Bubble -->
<div id="chat-bubble" style="
  display:none;
  position:fixed;
  bottom:20px;
  left:20px;
  background:#00ff99;
  color:black;
  padding:10px 14px;
  border-radius:50%;
  font-size:22px;
  box-shadow:0 0 10px #00ff99;
  cursor:pointer;
  z-index:9998;">ЁЯТм</div>

<script>
// ЁЯМ┐ Voice output in Hindi
function speakHindi(msg) {
  const u = new SpeechSynthesisUtterance(msg);
  u.lang = "hi-IN";
  u.rate = 1;
  speechSynthesis.speak(u);
}

// ЁЯза Fetch live plant condition
async function getPlantStatus() {
  try {
    const res = await fetch("https://phytopulse-org.onrender.com/api/plant-data");
    const data = await res.json();

    if (data.predictedState === "Normal") return "рдЖрдкрдХрд╛ рдкреМрдзрд╛ рдмрд┐рд▓реНрдХреБрд▓ рдареАрдХ рд╣реИ ЁЯМ┐";
    else if (data.predictedState.includes("Stress")) return "рдкреМрдзрд╛ рдереЛрдбрд╝рд╛ рддрдирд╛рд╡ рдореЗрдВ рд╣реИ ЁЯМ▒ тАФ рдзреНрдпрд╛рди рд░рдЦреЗрдВред";
    else if (data.predictedState.includes("Drought")) return "рдкреМрдзрд╛ рдкреНрдпрд╛рд╕рд╛ рд╣реИ ЁЯМ┐ тАФ рдкрд╛рдиреА рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред";
    else if (data.predictedState.includes("Pest")) return "рдЪреЗрддрд╛рд╡рдиреА! рдХреАрдЯ рдЧрддрд┐рд╡рд┐рдзрд┐ рдХрд╛ рдкрддрд╛ рдЪрд▓рд╛ ЁЯРЫ";
    else return "рдкреМрдзрд╛ рд╕рд╛рдорд╛рдиреНрдп рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╣реИ ЁЯМ▒";
  } catch {
    return "рд╕рд░реНрд╡рд░ рд╕реЗ рдХрдиреЗрдХреНрд╢рди рдирд╣реАрдВ рд╣реЛ рдкрд╛ рд░рд╣рд╛ ЁЯШФ";
  }
}

// ЁЯТм Handle chat message
async function processMessage(msg) {
  const log = document.getElementById("chat-log");
  log.innerHTML += `<div><strong>ЁЯСитАНЁЯМ╛ Farmer:</strong> ${msg}</div>`;

  let reply = "рдорд╛рдл рдХрд░реЗрдВ, рдореИрдВ рд╕рдордЭ рдирд╣реАрдВ рдкрд╛рдпрд╛ред";

  const lower = msg.toLowerCase();

  if (lower.includes("ok") || lower.includes("fine") || lower.includes("plant") || lower.includes("рдареАрдХ") || lower.includes("рдХреИрд╕рд╛")) {
    reply = await getPlantStatus();
  } else if (lower.includes("water") || lower.includes("рдкрд╛рдиреА")) {
    reply = "рдЖрдк рд╕рд┐рдВрдЪрд╛рдИ рдХреА рд╕реНрдерд┐рддрд┐ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ ЁЯТз тАФ рдкреМрдзреЗ рдХреЗ рд▓рд┐рдП рдкрд╛рдиреА рдЖрд╡рд╢реНрдпрдХ рд╣реИред";
  } else if (lower.includes("hello") || lower.includes("hi") || lower.includes("рдирдорд╕реНрддреЗ")) {
    reply = "рдирдорд╕реНрддреЗ рдХрд┐рд╕рд╛рди рдЬреА! рдореИрдВ PhytoPulse рдЪреИрдЯ рд╕рд╣рд╛рдпрдХ рд╣реВрдБ ЁЯМ┐";
  } else if (lower.includes("stress")) {
    reply = "рддрдирд╛рд╡ рдХреА рд╕реНрдерд┐рддрд┐ рдХреА рдЬрд╛рдВрдЪ рдХрд░ рд░рд╣рд╛ рд╣реВрдБ ЁЯМ▒...";
    const state = await getPlantStatus();
    reply += " " + state;
  }

  log.innerHTML += `<div><strong>ЁЯдЦ PhytoPulse:</strong> ${reply}</div>`;
  speakHindi(reply);
  log.scrollTop = log.scrollHeight;
}

// тЬЙя╕П Send button
document.getElementById("chat-send").onclick = async () => {
  const input = document.getElementById("chat-input");
  if (input.value.trim() !== "") {
    await processMessage(input.value.trim());
    input.value = "";
  }
};

// ЁЯОд Voice input
document.getElementById("chat-voice").onclick = () => {
  const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
  recognition.lang = "hi-IN";
  recognition.start();

  recognition.onresult = async (event) => {
    const msg = event.results[0][0].transcript;
    await processMessage(msg);
  };

  recognition.onerror = () => speakHindi("рдорд╛рдл рдХрд░реЗрдВ, рдЖрд╡рд╛рдЬрд╝ рд╕рдордЭ рдирд╣реАрдВ рдЖрдИред");
};

// ЁЯСЛ Auto-popup chatbot on load
window.addEventListener("load", () => {
  const bot = document.getElementById("chatbot");
  setTimeout(() => {
    bot.style.bottom = "20px"; // slide up
    const greeting = "рдирдорд╕реНрддреЗ рдХрд┐рд╕рд╛рди рдЬреА! рдореИрдВ рдЖрдкрдХрд╛ PhytoPulse рд╕рд╣рд╛рдпрдХ рд╣реВрдБ ЁЯМ┐ рдХреНрдпрд╛ рдЖрдк рдЬрд╛рдирдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХрд╛ рдкреМрдзрд╛ рдХреИрд╕рд╛ рд╣реИ?";
    document.getElementById("chat-log").innerHTML = `<div><strong>ЁЯдЦ PhytoPulse:</strong> ${greeting}</div>`;
    speakHindi(greeting);
  }, 1500);
});

// ЁЯлз Minimize and reopen logic
document.getElementById("minimize-btn").onclick = () => {
  document.getElementById("chatbot").style.bottom = "-400px";
  setTimeout(() => {
    document.getElementById("chat-bubble").style.display = "block";
  }, 800);
};

document.getElementById("chat-bubble").onclick = () => {
  document.getElementById("chat-bubble").style.display = "none";
  document.getElementById("chatbot").style.bottom = "20px";
};
</script>

</body>
</html>

