<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PhytoPulse ‚Äî Plant Emotion Network</title>
  <link rel="icon" type="image/png" href="phytopulse.png" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>

  <style>
    body {
      margin: 0;
      background: #000;
      color: #ccffcc;
      font-family: "Poppins", sans-serif;
      scroll-behavior: smooth;
      overflow-x: hidden;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 60px;
      background: #000;
      border-bottom: 1px solid #00ff99;
      box-shadow: 0 0 20px #00ff99;
      position: sticky;
      top: 0;
      z-index: 999;
    }

    header .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 1.8rem;
      font-weight: 700;
      color: #00ff99;
    }

    header nav ul {
      list-style: none;
      display: flex;
      gap: 30px;
      margin: 0;
      padding: 0;
    }

    header nav ul li a {
      color: #fff;
      text-decoration: none;
      font-weight: 500;
      transition: color 0.3s ease;
    }

    header nav ul li a:hover {
      color: #00ff99;
    }

    /* Hero Section */
    .hero {
      position: relative;
      height: 90vh;
      background: url('https://i.ibb.co/TffQpbw/hero-bg.jpg') no-repeat center center/cover;
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      color: #e0ffe0;
      overflow: hidden;
    }

    .hero::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.6);
      z-index: 0;
    }

    .hero-content {
      position: relative;
      z-index: 1;
      max-width: 800px;
      padding: 0 20px;
      animation: fadeInUp 1.6s ease-out;
    }

    .hero h1 {
      font-size: 3.5rem;
      color: #00ff99;
      text-shadow: 0 0 20px #00ff99;
      margin-bottom: 20px;
    }

    .hero p {
      font-size: 1.2rem;
      color: #ccffcc;
      margin-bottom: 40px;
    }

    .hero a {
      background: #00ff99;
      color: #000;
      padding: 12px 30px;
      border-radius: 30px;
      font-weight: 600;
      text-decoration: none;
      box-shadow: 0 0 20px #00ff99;
      transition: all 0.3s ease;
    }

    .hero a:hover {
      transform: scale(1.05);
      box-shadow: 0 0 35px #00ff99;
    }

    section {
      padding: 80px 10%;
      text-align: center;
      opacity: 0;
      transform: translateY(60px);
      transition: all 1s ease-out;
    }

    section.visible {
      opacity: 1;
      transform: translateY(0);
    }

    h2 {
      color: #00ff99;
      font-size: 2rem;
      margin-bottom: 20px;
      text-shadow: 0 0 15px #00ff99;
    }

    #technology {
      background: url('https://i.ibb.co/BHwX4P5W/beautiful-fern-leaves-black-background.jpg') no-repeat center center/cover;
      color: #fff;
      position: relative;
      padding: 120px 40px;
    }

    #technology::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      z-index: 0;
    }

    #technology div {
      position: relative;
      z-index: 1;
      max-width: 800px;
      margin: auto;
    }

    .card {
      background: #0a1a0a;
      color: #ccffcc;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 0 15px #00ff99;
      width: 280px;
      transition: transform 0.3s ease;
    }

    .card:hover {
      transform: scale(1.05);
      box-shadow: 0 0 30px #00ff99;
    }

    .benefit-grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 30px;
    }

    footer {
      background: #000;
      color: #fff;
      text-align: center;
      padding: 20px;
      border-top: 1px solid #00ff99;
    }

    /* Popup Alert */
    #alertPopup {
      display: none;
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: rgba(0, 0, 0, 0.85);
      border-left: 6px solid #00ff99;
      padding: 20px;
      color: white;
      border-radius: 10px;
      box-shadow: 0 0 20px #00ff99;
      z-index: 9999;
      max-width: 350px;
    }

    /* Chatbot */
    #chatbot {
      position: fixed;
      bottom: -400px;
      left: 20px;
      width: 320px;
      background: rgba(0, 0, 0, 0.9);
      color: white;
      padding: 15px;
      border-radius: 15px;
      box-shadow: 0 0 15px #00ff99;
      transition: bottom 0.8s ease-in-out;
      z-index: 9999;
    }

    #chat-bubble {
      display: none;
      position: fixed;
      bottom: 20px;
      left: 20px;
      background: #00ff99;
      color: black;
      padding: 10px 14px;
      border-radius: 50%;
      font-size: 22px;
      box-shadow: 0 0 10px #00ff99;
      cursor: pointer;
      z-index: 9998;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>

<body>
  <header>
    <div class="logo">
      <img src="phytopulse.png" style="height: 40px" />
      PhytoPulse
    </div>
    <nav>
      <ul>
        <li><a href="#about">About</a></li>
        <li><a href="#model">AI Model</a></li>
        <li><a href="#technology">Technology</a></li>
        <li><a href="#benefits">Benefits</a></li>
        <li><a href="#insights">Insights</a></li>
      </ul>
    </nav>
  </header>

  <section class="hero">
    <div class="hero-content">
      <h1>Giving Plants a Voice</h1>
      <p>Discover how PhytoPulse translates plant bio-signals into insights using AI and neuroscience.</p>
      <a href="#insights">Explore Dashboard</a>
    </div>
  </section>

  <section id="about">
    <h2>About PhytoPulse</h2>
    <p>PhytoPulse bridges neuroscience, plant biology, and AI to decode plant communication.</p>
  </section>

  <section id="model">
    <h2>AI Model Development</h2>
    <p>The collected plant bio-signal data trains our AI model to detect plant stress early.</p>
  </section>

  <section id="technology">
    <div>
      <h2>How It Works</h2>
      <p>
        Our AI-driven sensors capture electrical signals from plants, revealing stress and adaptation before visible
        symptoms appear.
      </p>
    </div>
  </section>

  <section id="benefits">
    <h2>Why PhytoPulse?</h2>
    <div class="benefit-grid">
      <div class="card"><h3>Early Detection</h3><p>Predict stress before visible damage.</p></div>
      <div class="card"><h3>Eco-Friendly</h3><p>Non-invasive sensing for all crops.</p></div>
      <div class="card"><h3>Smart Insights</h3><p>Farmers get real-time updates and advice.</p></div>
    </div>
  </section>

  <section id="insights">
    <h2>Live Plant Communication Dashboard</h2>
    <canvas id="plantChart" width="700" height="350" style="background:#0a1a0a;border-radius:15px;box-shadow:0 0 20px #00ff99;"></canvas>
    <div id="plant-data" style="margin-top:30px;color:#00ff99;"></div>
  </section>

  <section>
    <h2>üåø Simulated Plant Signal Patterns</h2>
    <canvas id="pythonSimChart" width="800" height="400" style="background:#0a1a0a;border-radius:15px;box-shadow:0 0 20px #00ff99;"></canvas>
  </section>

  <footer>¬© 2025 PhytoPulse</footer>

  <!-- ALERT Popup -->
  <div id="alertPopup"><strong id="alertTitle"></strong><p id="alertMessage"></p></div>

  <!-- Chatbot -->
  <div id="chatbot">
    <div style="display:flex;justify-content:space-between;">
      <strong>ü§ñ PhytoPulse ‡§∏‡§π‡§æ‡§Ø‡§ï</strong>
      <button id="minimize-btn" style="background:none;border:none;color:#00ff99;cursor:pointer;">‚àí</button>
    </div>
    <div id="chat-log" style="max-height:200px;overflow-y:auto;margin:10px 0;font-size:14px;"></div>
    <input id="chat-input" type="text" placeholder="Type in English or Hindi..." style="width:100%;padding:8px;border-radius:8px;border:none;">
    <div style="margin-top:8px;display:flex;justify-content:space-between;">
      <button id="chat-send" style="background:#00ff99;border:none;color:#000;padding:6px 10px;border-radius:6px;cursor:pointer;">Send</button>
      <button id="chat-voice" style="background:#66ccff;border:none;color:#000;padding:6px 10px;border-radius:6px;cursor:pointer;">üé§ Speak</button>
    </div>
  </div>

  <div id="chat-bubble">üí¨</div>

  <script>
    const API_URL = window.location.hostname.includes("localhost")
      ? "http://localhost:5000/api/plant-data"
      : "https://phytopulse-org.onrender.com/api/plant-data";

    // Fade animation observer
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add("visible"); });
    }, { threshold: 0.2 });
    document.querySelectorAll("section").forEach(el => observer.observe(el));

    // Voice in Hindi
    function speakHindi(msg) {
      const u = new SpeechSynthesisUtterance(msg);
      u.lang = "hi-IN";
      u.rate = 1;
      speechSynthesis.speak(u);
    }

    // Show Alerts
    function showAlert(state, msg) {
      const popup = document.getElementById("alertPopup");
      const title = document.getElementById("alertTitle");
      const message = document.getElementById("alertMessage");
      let color = "#00ff99";
      if (state.includes("Heat")) color = "#ff8800";
      else if (state.includes("Drought")) color = "#ffaa00";
      else if (state.includes("Pest")) color = "#ff5555";
      popup.style.borderLeft = `6px solid ${color}`;
      title.innerHTML = `üö® ${state}`;
      message.innerHTML = msg;
      popup.style.display = "block";
      speakHindi(msg);
      setTimeout(() => (popup.style.display = "none"), 7000);
    }

    // Chart setup
    const ctx = document.getElementById("plantChart").getContext("2d");
    const timeLabels = [], signalData = [];
    const chart = new Chart(ctx, {
      type: "line",
      data: { labels: timeLabels, datasets: [{ label: "Signal Strength (V)", data: signalData, borderColor: "#00ff99", fill: true, tension: 0.3 }] },
      options: { scales: { x: { ticks: { color: "#ccffcc" } }, y: { min: 0, max: 5, ticks: { color: "#ccffcc" } } }, plugins: { legend: { labels: { color: "#00ff99" } } } }
    });

    async function fetchPlantData() {
      try {
        const res = await fetch(API_URL);
        const data = await res.json();
        const now = new Date().toLocaleTimeString();
        if (timeLabels.length > 20) { timeLabels.shift(); signalData.shift(); }
        timeLabels.push(now);
        signalData.push(data.signalStrength);
        chart.update();
        document.getElementById("plant-data").innerHTML = `
          <h3>üåø Live Plant Data</h3>
          <p><strong>Moisture:</strong> ${data.moisture}%</p>
          <p><strong>Temperature:</strong> ${data.temperature}¬∞C</p>
          <p><strong>Signal:</strong> ${data.signalStrength} V</p>
          <p><strong>Emotion:</strong> ${data.emotion}</p>`;
        if (data.predictedState !== "Normal") showAlert(data.predictedState, data.alertMessage || "‡§™‡•å‡§ß‡§æ ‡§§‡§®‡§æ‡§µ ‡§Æ‡•á‡§Ç ‡§π‡•à!");
      } catch (e) { console.error(e); }
    }
    setInterval(fetchPlantData, 10000);
    fetchPlantData();

    // Simulated chart
    const ctx2 = document.getElementById("pythonSimChart").getContext("2d");
    const states = ["Normal", "Heat Stress", "Drought Stress", "Pest Attack"];
    function simulate(state) {
      let base = Array.from({ length: 100 }, () => Math.random() * 0.5);
      if (state === "Heat Stress") base = base.map((v, i) => v + Math.sin(i / 10) * 0.8);
      if (state === "Drought Stress") base = base.map(v => v + Math.random() * 0.4 + 0.8);
      if (state === "Pest Attack") base = base.map(v => v + (Math.random() > 0.9 ? 0.8 : 0));
      return base;
    }
    const simData = states.map(s => ({ label: s, data: simulate(s), borderColor: s === "Normal" ? "#00ff99" : s === "Heat Stress" ? "#ff5555" : s === "Drought Stress" ? "#ffaa00" : "#8888ff", fill: false, tension: 0.3 }));
    new Chart(ctx2, { type: "line", data: { labels: Array.from({ length: 100 }, (_, i) => `s${i}`), datasets: simData }, options: { plugins: { legend: { labels: { color: "#00ff99" } }, title: { display: true, text: "Simulated Electrical Signal Activity", color: "#00ff99" } }, scales: { x: { ticks: { color: "#ccffcc" } }, y: { min: -1, max: 3, ticks: { color: "#ccffcc" } } } } });
    setInterval(() => { simData.forEach(d => (d.data = simulate(d.label))); Chart.getChart(ctx2)?.update(); }, 5000);

    // Chatbot logic
    async function getPlantStatus() {
      try {
        const res = await fetch(API_URL);
        const data = await res.json();
        if (data.predictedState === "Normal") return "‡§Ü‡§™‡§ï‡§æ ‡§™‡•å‡§ß‡§æ ‡§¨‡§ø‡§≤‡•ç‡§ï‡•Å‡§≤ ‡§†‡•Ä‡§ï ‡§π‡•à üåø";
        else return "‡§™‡•å‡§ß‡§æ ‡§§‡§®‡§æ‡§µ ‡§Æ‡•á‡§Ç ‡§π‡•à üå± ‚Äî ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§∞‡§ñ‡•á‡§Ç‡•§";
      } catch { return "‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§∏‡•á ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã ‡§™‡§æ ‡§∞‡§π‡§æ üòî"; }
    }

    async function processMessage(msg) {
      const log = document.getElementById("chat-log");
      log.innerHTML += `<div><strong>üë®‚Äçüåæ:</strong> ${msg}</div>`;
      let reply = "‡§Æ‡§æ‡§´ ‡§ï‡§∞‡•á‡§Ç, ‡§Æ‡•à‡§Ç ‡§∏‡§Æ‡§ù ‡§®‡§π‡•Ä‡§Ç ‡§™‡§æ‡§Ø‡§æ‡•§";
      const lower = msg.toLowerCase();
      if (lower.includes("plant") || lower.includes("‡§ï‡•à‡§∏‡§æ")) reply = await getPlantStatus();
      else if (lower.includes("hello") || lower.includes("hi") || lower.includes("‡§®‡§Æ‡§∏‡•ç‡§§‡•á")) reply = "‡§®‡§Æ‡§∏‡•ç‡§§‡•á ‡§ï‡§ø‡§∏‡§æ‡§® ‡§ú‡•Ä! ‡§Æ‡•à‡§Ç PhytoPulse ‡§ö‡•à‡§ü ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§π‡•Ç‡§Å üåø";
      log.innerHTML += `<div><strong>ü§ñ:</strong> ${reply}</div>`;
      speakHindi(reply);
      log.scrollTop = log.scrollHeight;
    }

    document.getElementById("chat-send").onclick = async () => {
      const input = document.getElementById("chat-input");
      if (input.value.trim()) { await processMessage(input.value.trim()); input.value = ""; }
    };

    document.getElementById("chat-voice").onclick = () => {
      const recog = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      recog.lang = "hi-IN";
      recog.start();
      recog.onresult = async (e) => { const msg = e.results[0][0].transcript; await processMessage(msg); };
    };

    window.addEventListener("load", () => {
      const bot = document.getElementById("chatbot");
      setTimeout(() => {
        bot.style.bottom = "20px";
        const greet = "‡§®‡§Æ‡§∏‡•ç‡§§‡•á ‡§ï‡§ø‡§∏‡§æ‡§® ‡§ú‡•Ä! ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡§æ PhytoPulse ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§π‡•Ç‡§Å üåø ‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§ú‡§æ‡§®‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç ‡§ï‡§ø ‡§Ü‡§™‡§ï‡§æ ‡§™‡•å‡§ß‡§æ ‡§ï‡•à‡§∏‡§æ ‡§π‡•à?";
        document.getElementById("chat-log").innerHTML = `<div><strong>ü§ñ:</strong> ${greet}</div>`;
        speakHindi(greet);
      }, 1500);
    });

    document.getElementById("minimize-btn").onclick = () => {
      document.getElementById("chatbot").style.bottom = "-400px";
      setTimeout(() => document.getElementById("chat-bubble").style.display = "block", 800);
    };
    document.getElementById("chat-bubble").onclick = () => {
      document.getElementById("chat-bubble").style.display = "none";
      document.getElementById("chatbot").style.bottom = "20px";
    };
  </script>
</body>
</html>
