<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PhytoPulse ‚Äî Plant Emotion Network</title>
  <link rel="icon" type="image/png" href="phytopulse.png" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>

  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      background: #000;
      color: #ccffcc;
      font-family: "Poppins", sans-serif;
      scroll-behavior: smooth;
      overflow-x: hidden;
    }

    /* HEADER */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 60px;
      background: #000;
      border-bottom: 1px solid #00ff99;
      box-shadow: 0 0 20px #00ff99;
      position: sticky;
      top: 0;
      z-index: 999;
    }
    header .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 1.6rem;
      font-weight: 700;
      color: #00ff99;
    }
    header nav ul {
      list-style: none;
      display: flex;
      gap: 25px;
      margin: 0;
      padding: 0;
    }
    header nav ul li a {
      color: #fff;
      text-decoration: none;
      font-weight: 500;
      transition: color 0.3s ease;
    }
    header nav ul li a:hover { color: #00ff99; }

    /* HERO */
    .hero {
      position: relative;
      height: 90vh;
      background: url('https://i.ibb.co/TffQpbw/hero-bg.jpg') no-repeat center/cover;
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      color: #e0ffe0;
    }
    .hero::before {
      content: "";
      position: absolute; inset: 0;
      background: rgba(0, 0, 0, 0.6);
      z-index: 0;
    }
    .hero-content {
      position: relative;
      z-index: 1;
      max-width: 800px;
      padding: 0 20px;
      animation: fadeInUp 1.6s ease-out;
    }
    .hero h1 { font-size: 3.2rem; color: #00ff99; text-shadow: 0 0 20px #00ff99; margin-bottom: 20px; }
    .hero p { font-size: 1.1rem; margin-bottom: 40px; }
    .hero a {
      background: #00ff99; color: #000; padding: 12px 28px;
      border-radius: 30px; font-weight: 600; text-decoration: none;
      box-shadow: 0 0 20px #00ff99; transition: all 0.3s ease;
    }
    .hero a:hover { transform: scale(1.05); box-shadow: 0 0 35px #00ff99; }

    /* SECTIONS WITH SMOOTH SCROLL ANIMATIONS */
    section {
      padding: 80px 10%; text-align: center;
      opacity: 0; transform: translateY(80px);
      transition: all 1s ease-out;
    }
    section.visible { opacity: 1; transform: translateY(0); }

    h2 { color: #00ff99; font-size: 2rem; text-shadow: 0 0 15px #00ff99; }

    /* TECHNOLOGY SECTION */
    #technology {
      background: url('https://i.ibb.co/BHwX4P5W/beautiful-fern-leaves-black-background.jpg') no-repeat center/cover;
      color: #fff; position: relative; padding: 120px 40px;
    }
    #technology::before {
      content: ""; position: absolute; inset: 0;
      background: rgba(0,0,0,0.6); z-index: 0;
    }
    #technology div { position: relative; z-index: 1; max-width: 800px; margin: auto; }

    .card {
      background: #0a1a0a; color: #ccffcc; padding: 25px; border-radius: 15px;
      box-shadow: 0 0 15px #00ff99; width: 280px; transition: transform 0.3s ease;
    }
    .card:hover { transform: scale(1.05); box-shadow: 0 0 30px #00ff99; }

    .benefit-grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 30px;
    }

    footer {
      background: #000; color: #fff; text-align: center; padding: 20px;
      border-top: 1px solid #00ff99;
    }

    /* üîî ALERT POPUP */
    #alertPopup {
      display: none; position: fixed; bottom: 30px; right: 30px;
      background: rgba(0,0,0,0.9); border-left: 6px solid #00ff99;
      padding: 20px; color: white; border-radius: 12px;
      box-shadow: 0 0 25px #00ff99; z-index: 9999; max-width: 360px;
      animation: slideUp 0.6s ease;
    }
    #alertAction {
      margin-top: 12px;
      background: #00ff99; color: #000; padding: 8px 15px;
      border: none; border-radius: 8px; cursor: pointer;
      font-weight: 600; transition: 0.3s;
    }
    #alertAction:hover { background: #33ffaa; }

    /* üí¨ CHATBOT */
    #chatbot {
      position: fixed; bottom: -400px; left: 20px; width: 320px;
      background: rgba(0,0,0,0.9); color: white; padding: 15px; border-radius: 15px;
      box-shadow: 0 0 15px #00ff99; transition: bottom 0.8s ease-in-out; z-index: 9999;
    }
    #chat-bubble {
      display: none; position: fixed; bottom: 20px; left: 20px;
      background: #00ff99; color: black; padding: 10px 14px; border-radius: 50%;
      font-size: 22px; box-shadow: 0 0 10px #00ff99; cursor: pointer; z-index: 9998;
    }

    /* ‚ú® Animations */
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes slideUp {
      from { transform: translateY(50px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    /* üì± MOBILE RESPONSIVE DESIGN */
    @media (max-width: 768px) {
      header { flex-direction: column; padding: 15px 30px; }
      header nav ul { flex-direction: column; gap: 10px; align-items: center; }
      .hero h1 { font-size: 2rem; }
      .hero p { font-size: 1rem; }
      section { padding: 60px 5%; }
      .card { width: 90%; }
      #chatbot { width: 90%; left: 5%; }
      #alertPopup { right: 10px; left: 10px; max-width: unset; }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo"><img src="phytopulse.png" style="height: 40px" />PhytoPulse</div>
    <nav>
      <ul>
        <li><a href="#about">About</a></li>
        <li><a href="#model">AI Model</a></li>
        <li><a href="#technology">Technology</a></li>
        <li><a href="#benefits">Benefits</a></li>
        <li><a href="#insights">Insights</a></li>
      </ul>
    </nav>
  </header>

  <section class="hero">
    <div class="hero-content">
      <h1>Giving Plants a Voice</h1>
      <p>Discover how PhytoPulse translates plant bio-signals into insights using AI and neuroscience.</p>
      <a href="#insights">Explore Dashboard</a>
    </div>
  </section>

  <section id="about"><h2>About PhytoPulse</h2><p>PhytoPulse bridges neuroscience, plant biology, and AI to decode plant communication.</p></section>
  <section id="model"><h2>AI Model Development</h2><p>The collected plant bio-signal data trains our AI model to detect plant stress early.</p></section>

  <section id="technology">
    <div><h2 style="color:white;text-shadow:0 0 20px #00ff99;">How It Works</h2>
      <p>Our AI-driven sensors capture electrical signals revealing plant stress and emotions before visible signs.</p></div>
  </section>

  <section id="benefits">
    <h2>Why PhytoPulse?</h2>
    <div class="benefit-grid">
      <div class="card"><h3>Early Detection</h3><p>Predict stress before visible damage.</p></div>
      <div class="card"><h3>Eco-Friendly</h3><p>Non-invasive sensing for all crops.</p></div>
      <div class="card"><h3>Smart Insights</h3><p>Farmers get real-time updates and advice.</p></div>
    </div>
  </section>

  <section id="insights">
    <h2>Live Plant Communication Dashboard</h2>
    <canvas id="plantChart" width="700" height="350" style="background:#0a1a0a;border-radius:15px;box-shadow:0 0 20px #00ff99;"></canvas>
    <div id="plant-data" style="margin-top:30px;color:#00ff99;"></div>
  </section>

  <footer>¬© 2025 PhytoPulse</footer>

  <!-- üîî ALERT POPUP -->
  <div id="alertPopup">
    <strong id="alertTitle"></strong>
    <p id="alertMessage"></p>
    <button id="alertAction"></button>
  </div>

  <!-- üí¨ CHATBOT -->
  <div id="chatbot">
    <div style="display:flex;justify-content:space-between;">
      <strong>ü§ñ PhytoPulse ‡§∏‡§π‡§æ‡§Ø‡§ï</strong>
      <button id="minimize-btn" style="background:none;border:none;color:#00ff99;cursor:pointer;">‚àí</button>
    </div>
    <div id="chat-log" style="max-height:200px;overflow-y:auto;margin:10px 0;font-size:14px;"></div>
    <input id="chat-input" type="text" placeholder="Type in English or Hindi..." style="width:100%;padding:8px;border-radius:8px;border:none;">
    <div style="margin-top:8px;display:flex;justify-content:space-between;">
      <button id="chat-send" style="background:#00ff99;border:none;color:#000;padding:6px 10px;border-radius:6px;cursor:pointer;">Send</button>
      <button id="chat-voice" style="background:#66ccff;border:none;color:#000;padding:6px 10px;border-radius:6px;cursor:pointer;">üé§ Speak</button>
    </div>
  </div>
  <div id="chat-bubble">üí¨</div>

  <script>
    const API_URL = window.location.hostname.includes("localhost")
      ? "http://localhost:5000/api/plant-data"
      : "https://phytopulse-org.onrender.com/api/plant-data";

    function speakHindi(msg){const u=new SpeechSynthesisUtterance(msg);u.lang="hi-IN";speechSynthesis.speak(u);}

    // Smooth section reveal animations
    const observer=new IntersectionObserver(entries=>{
      entries.forEach(e=>{
        if(e.isIntersecting){e.target.classList.add("visible");}
      });
    },{threshold:0.2});
    document.querySelectorAll("section").forEach(el=>observer.observe(el));

    // ‚ö†Ô∏è Smart Alerts with 1-Minute Cooldown
    let cooldown=0,lastAlert="";
    function showAlert(state,msg){
      if(cooldown>0)return;
      cooldown=60;
      const popup=document.getElementById("alertPopup");
      const title=document.getElementById("alertTitle");
      const message=document.getElementById("alertMessage");
      const action=document.getElementById("alertAction");

      let actionText="‡§ú‡§æ‡§Å‡§ö ‡§ú‡§æ‡§∞‡•Ä ‡§∞‡§ñ‡•á‡§Ç üåø";
      if(state.toLowerCase().includes("drought")||state.toLowerCase().includes("stress")) actionText="üíß ‡§™‡§æ‡§®‡•Ä ‡§¶‡•á‡§Ç";
      else if(state.toLowerCase().includes("heat")) actionText="üå§ ‡§õ‡§æ‡§Ø‡§æ ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡•á‡§Ç";
      else if(state.toLowerCase().includes("pest")) actionText="üêõ ‡§ï‡•Ä‡§ü‡§®‡§æ‡§∂‡§ï ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç";

      title.innerHTML=`üö® ${state}`;
      message.innerHTML=msg+`<br><small>‚è≥ ‡§Ö‡§ó‡§≤‡•Ä ‡§ú‡§æ‡§Å‡§ö 60 ‡§∏‡•á‡§ï‡§Ç‡§° ‡§Æ‡•á‡§Ç...</small>`;
      action.innerText=actionText;
      action.onclick=()=>speakHindi(actionText);

      popup.style.display="block";
      speakHindi(msg+" "+actionText);
      setTimeout(()=>popup.style.display="none",7000);
    }
    setInterval(()=>{if(cooldown>0)cooldown--;},1000);

    // üåø Live Chart
    const ctx=document.getElementById("plantChart").getContext("2d");
    const labels=[],dataPoints=[];
    const chart=new Chart(ctx,{
      type:"line",
      data:{labels,datasets:[{label:"Signal (V)",data:dataPoints,borderColor:"#00ff99",tension:0.3,fill:true,backgroundColor:"rgba(0,255,153,0.2)"}]},
      options:{scales:{x:{ticks:{color:"#ccffcc"}},y:{min:0,max:5,ticks:{color:"#ccffcc"}}}}
    });

    async function fetchPlantData(){
      try{
        const r=await fetch(API_URL);
        const d=await r.json();
        const now=new Date().toLocaleTimeString();
        if(labels.length>20){labels.shift();dataPoints.shift();}
        labels.push(now);dataPoints.push(d.signalStrength);chart.update();
        document.getElementById("plant-data").innerHTML=`
          <h3>üåø Live Plant Data</h3>
          <p>Moisture: ${d.moisture}% | Temp: ${d.temperature}¬∞C</p>
          <p>Signal: ${d.signalStrength}V | Emotion: ${d.emotion}</p>
          <p><small>Last updated: ${d.timestamp}</small></p>`;
        if(d.predictedState!=="Normal"&&d.alertMessage!==lastAlert){
          showAlert(d.predictedState,d.alertMessage);
          lastAlert=d.alertMessage;
        }
      }catch(e){console.error(e);}
    }
    setInterval(fetchPlantData,5000);
    fetchPlantData();

    // üí¨ Chatbot
    async function getPlantStatus(){
      try{
        const r=await fetch(API_URL);
        const d=await r.json();
        if(d.predictedState==="Normal")return"‡§Ü‡§™‡§ï‡§æ ‡§™‡•å‡§ß‡§æ ‡§¨‡§ø‡§≤‡•ç‡§ï‡•Å‡§≤ ‡§†‡•Ä‡§ï ‡§π‡•à üåø";
        else return"‡§™‡•å‡§ß‡§æ ‡§§‡§®‡§æ‡§µ ‡§Æ‡•á‡§Ç ‡§π‡•à üå± ‚Äî ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§∞‡§ñ‡•á‡§Ç‡•§";
      }catch{return"‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§∏‡•á ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã ‡§™‡§æ ‡§∞‡§π‡§æ üòî";}
    }
    async function processMessage(msg){
      const log=document.getElementById("chat-log");
      log.innerHTML+=`<div><strong>üë®‚Äçüåæ:</strong> ${msg}</div>`;
      let reply="‡§Æ‡§æ‡§´ ‡§ï‡§∞‡•á‡§Ç, ‡§Æ‡•à‡§Ç ‡§∏‡§Æ‡§ù ‡§®‡§π‡•Ä‡§Ç ‡§™‡§æ‡§Ø‡§æ‡•§";
      const lower=msg.toLowerCase();
      if(lower.includes("plant")||lower.includes("‡§ï‡•à‡§∏‡§æ"))reply=await getPlantStatus();
      else if(lower.includes("hello")||lower.includes("hi")||lower.includes("‡§®‡§Æ‡§∏‡•ç‡§§‡•á"))reply="‡§®‡§Æ‡§∏‡•ç‡§§‡•á ‡§ï‡§ø‡§∏‡§æ‡§® ‡§ú‡•Ä! ‡§Æ‡•à‡§Ç PhytoPulse ‡§ö‡•à‡§ü ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§π‡•Ç‡§Å üåø";
      log.innerHTML+=`<div><strong>ü§ñ:</strong> ${reply}</div>`;
      speakHindi(reply);
      log.scrollTop=log.scrollHeight;
    }
    document.getElementById("chat-send").onclick=async()=>{
      const i=document.getElementById("chat-input");
      if(i.value.trim()){await processMessage(i.value.trim());i.value="";}
    };
    document.getElementById("chat-voice").onclick=()=>{
      const recog=new(window.SpeechRecognition||window.webkitSpeechRecognition)();
      recog.lang="hi-IN";recog.start();
      recog.onresult=async e=>{await processMessage(e.results[0][0].transcript);};
    };
    window.addEventListener("load",()=>{
      const bot=document.getElementById("chatbot");
      setTimeout(()=>{
        bot.style.bottom="20px";
        const greet="‡§®‡§Æ‡§∏‡•ç‡§§‡•á ‡§ï‡§ø‡§∏‡§æ‡§® ‡§ú‡•Ä! ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡§æ PhytoPulse ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§π‡•Ç‡§Å üåø ‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§ú‡§æ‡§®‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç ‡§ï‡§ø ‡§Ü‡§™‡§ï‡§æ ‡§™‡•å‡§ß‡§æ ‡§ï‡•à‡§∏‡§æ ‡§π‡•à?";
        document.getElementById("chat-log").innerHTML=`<div><strong>ü§ñ:</strong> ${greet}</div>`;
        speakHindi(greet);
      },1500);
    });
    document.getElementById("minimize-btn").onclick=()=>{
      document.getElementById("chatbot").style.bottom="-400px";
      setTimeout(()=>document.getElementById("chat-bubble").style.display="block",800);
    };
    document.getElementById("chat-bubble").onclick=()=>{
      document.getElementById("chat-bubble").style.display="none";
      document.getElementById("chatbot").style.bottom="20px";
    };
  </script>

  <script>
let lastAlertTime = 0;
const cooldown = 60 * 1000; // 1 minute in milliseconds

// üó£Ô∏è Function to speak message aloud (Hindi)
function speakAlert(message) {
  const utterance = new SpeechSynthesisUtterance(message);
  utterance.lang = "hi-IN";  // Hindi voice
  utterance.rate = 1;        // normal speed
  utterance.pitch = 1;       // normal tone
  speechSynthesis.speak(utterance);
}

// üåø Function to show alert + enforce cooldown
function showAlert(message) {
  const now = Date.now();
  if (now - lastAlertTime < cooldown) {
    console.log("‚è≥ Cooldown active ‚Äî skipping alert");
    return; // Skip if within cooldown
  }
  lastAlertTime = now;

  alert(message + " üåø (‡§Ö‡§ó‡§≤‡§æ ‡§Ö‡§≤‡§∞‡•ç‡§ü 1 ‡§Æ‡§ø‡§®‡§ü ‡§¨‡§æ‡§¶ ‡§Ü‡§è‡§ó‡§æ)");
  speakAlert(message);
}

// üå± Example simulation ‚Äî replace later with sensor data or AI logic
function checkPlantStatus() {
  const waterLevel = Math.random();
  const pestDetected = Math.random();

  if (waterLevel < 0.3) {
    showAlert("üö∞ ‡§™‡•å‡§ß‡•ã‡§Ç ‡§ï‡•ã ‡§™‡§æ‡§®‡•Ä ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à!");
  } else if (pestDetected < 0.2) {
    showAlert("üêõ ‡§™‡•å‡§ß‡•ã‡§Ç ‡§™‡§∞ ‡§ï‡•Ä‡§ü ‡§π‡§Æ‡§≤‡§æ ‡§™‡§æ‡§Ø‡§æ ‡§ó‡§Ø‡§æ!");
  }
}

// ‚è≤Ô∏è Run every 15 seconds
setInterval(checkPlantStatus, 15000);
</script>
  
</body>
</html>

