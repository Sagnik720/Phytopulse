<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PhytoPulse тАФ Plant Emotion Network</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" type="image/png" href="phytopulse.png">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>

  <style>
    html { scroll-behavior: smooth; }
    body { background-color: #000; color: #e0ffe0; font-family: "Poppins", sans-serif; }
    .fade-section { opacity: 0; transform: translateY(40px); transition: opacity 1.2s ease-out, transform 1.2s ease-out; }
    .fade-section.visible { opacity: 1; transform: translateY(0); }
  </style>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) entry.target.classList.add("visible");
          else entry.target.classList.remove("visible");
        });
      }, { threshold: 0.2 });

      document.querySelectorAll("section, .benefit-grid, .card, .hero-content")
        .forEach(el => { el.classList.add("fade-section"); observer.observe(el); });
    });
  </script>
</head>

<body>
  <!-- Navbar -->
  <header class="navbar">
    <div class="logo">
      <img src="phytopulse.png" alt="PhytoPulse Logo" />
      <span>PhytoPulse</span>
    </div>
    <nav>
      <ul>
        <li><a href="#about">About</a></li>
        <li><a href="#model">AI Model</a></li>
        <li><a href="#technology">Technology</a></li>
        <li><a href="#benefits">Benefits</a></li>
        <li><a href="#insights">Insights</a></li>
      </ul>
    </nav>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="overlay"></div>
    <div class="hero-content">
      <h1>Giving Plants a Voice</h1>
      <p>Discover how PhytoPulse translates plant bio-signals into insights using AI and neuroscience.</p>
      <a href="#insights" class="btn">Explore Dashboard</a>
    </div>
  </section>

  <!-- About -->
  <section id="about" class="about">
    <h2>About PhytoPulse</h2>
    <p>PhytoPulse bridges neuroscience, plant biology, and AI to decode plant communication.</p>
  </section>

  <!-- AI Model -->
  <section id="model" class="model-section">
    <h2>AI Model Development</h2>
    <p>The collected plant bio-signal data trains our machine learning model to detect plant stress early.</p>
  </section>

  <!-- Technology -->
  <section id="technology" style="
    position: relative;
    background: url('https://i.ibb.co/BHwX4P5W/beautiful-fern-leaves-black-background.jpg') no-repeat center center/cover;
    color: #fff; text-align: center; padding: 120px 40px; overflow: hidden;">
    <div style="position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.55);z-index:0;"></div>
    <div style="position:relative;z-index:1;max-width:800px;margin:0 auto;">
      <h2 style="color:#00ff99;">How It Works</h2>
      <p>AI-driven sensors capture electrical signals from plants, revealing stress or emotions before visible signs.</p>
    </div>
  </section>

  <!-- Benefits -->
  <section id="benefits">
    <h2>Why PhytoPulse?</h2>
    <div class="benefit-grid">
      <div class="card"><h3>Early Detection</h3><p>Predict stress before visible damage.</p></div>
      <div class="card"><h3>Eco-Friendly</h3><p>Non-invasive sensing for all crops.</p></div>
      <div class="card"><h3>Smart Insights</h3><p>Farmers get real-time updates and advice.</p></div>
    </div>
  </section>

  <!-- Insights -->
  <section id="insights">
    <h2>Live Plant Communication Dashboard</h2>
    <div style="width:80%;max-width:700px;margin:50px auto;text-align:center;">
      <h3 style="color:#00ff99;">ЁЯУК Real-Time Plant Signal Graph</h3>
      <canvas id="plantChart" width="700" height="350" style="background:#0a1a0a;border-radius:15px;box-shadow:0 0 20px #00ff99;"></canvas>
    </div>
    <div id="plant-data" style="margin:40px;color:#00ff99;"></div>
  </section>

  <!-- JS: Live Data -->
  <script>
    const API_URL = window.location.hostname.includes("localhost")
      ? "http://localhost:5000/api/plant-data"
      : "https://phytopulse-org.onrender.com/api/plant-data";

    const ctx = document.getElementById('plantChart').getContext('2d');
    const timeLabels = [];
    const signalData = [];
    const chart = new Chart(ctx, {
      type: 'line',
      data: { labels: timeLabels, datasets: [{ label: 'Signal Strength (V)', data: signalData, borderColor: '#00ff99', backgroundColor: 'rgba(0,255,153,0.2)', fill: true, tension: 0.3, pointRadius: 2 }] },
      options: {
        scales: {
          x: { title: { display: true, text: 'Time', color: '#00ff99' }, ticks: { color: '#ccffcc' } },
          y: { title: { display: true, text: 'Signal Voltage (V)', color: '#00ff99' }, ticks: { color: '#ccffcc' }, min: 0, max: 5 }
        },
        plugins: { legend: { labels: { color: '#00ff99' } } }
      }
    });

    let cooldown = 60;
    let lastAlert = "";

    async function fetchPlantData() {
      try {
        const res = await fetch(API_URL);
        const data = await res.json();

        const now = new Date().toLocaleTimeString();
        if (timeLabels.length > 20) { timeLabels.shift(); signalData.shift(); }
        timeLabels.push(now);
        signalData.push(data.signalStrength);
        chart.update();

        document.getElementById("plant-data").innerHTML = `
          <h3>ЁЯМ┐ PhytoPulse Live Plant Data</h3>
          <p><strong>Moisture:</strong> ${data.moisture}%</p>
          <p><strong>Temperature:</strong> ${data.temperature}┬░C</p>
          <p><strong>Signal Strength:</strong> ${data.signalStrength} V</p>
          <p><strong>Emotion:</strong> ${data.emotion}</p>
          <p><strong>Health:</strong> ${data.healthStatus}</p>
          <p><em>Updated: ${data.timestamp}</em></p>`;
      } catch (e) {
        console.error("Error fetching data:", e);
      }
    }

    setInterval(fetchPlantData, 5000);
    fetchPlantData();
  </script>

  <footer><p>┬й 2025 PhytoPulse</p></footer>

  <!-- Chatbot -->
  <div id="chatbot" style="
    position:fixed;bottom:-400px;left:20px;width:320px;
    background:rgba(0,0,0,0.9);color:white;padding:15px;border-radius:15px;
    font-family:Poppins,sans-serif;box-shadow:0 0 15px #00ff99;
    transition:bottom 0.8s ease-in-out;z-index:9999;">
    <div style="display:flex;justify-content:space-between;">
      <strong>ЁЯдЦ PhytoPulse рд╕рд╣рд╛рдпрдХ</strong>
      <button id="minimize-btn" style="background:none;border:none;color:#00ff99;cursor:pointer;">тИТ</button>
    </div>
    <div id="chat-log" style="max-height:200px;overflow-y:auto;margin:10px 0;font-size:14px;"></div>
    <input id="chat-input" type="text" placeholder="Type in English or Hindi..." style="width:100%;padding:8px;border-radius:8px;border:none;">
    <button id="chat-send" style="background:#00ff99;border:none;color:#000;padding:6px 10px;margin-top:8px;border-radius:6px;cursor:pointer;">Send</button>
  </div>

  <div id="chat-bubble" style="display:none;position:fixed;bottom:20px;left:20px;background:#00ff99;color:black;
  padding:10px;border-radius:50%;font-size:22px;cursor:pointer;box-shadow:0 0 10px #00ff99;">ЁЯТм</div>

  <script>
    async function getPlantStatus() {
      try {
        const res = await fetch(API_URL);
        const data = await res.json();
        if (data.predictedState === "Normal") return "рдЖрдкрдХрд╛ рдкреМрдзрд╛ рдмрд┐рд▓реНрдХреБрд▓ рдареАрдХ рд╣реИ ЁЯМ┐";
        else return "рдкреМрдзрд╛ рд╣рд▓реНрдХреЗ рддрдирд╛рд╡ рдореЗрдВ рд╣реИ ЁЯМ▒ тАФ рдзреНрдпрд╛рди рд░рдЦреЗрдВред";
      } catch {
        return "рд╕рд░реНрд╡рд░ рд╕реЗ рдХрдиреЗрдХреНрд╢рди рдирд╣реАрдВ рд╣реЛ рдкрд╛ рд░рд╣рд╛ ЁЯШФ";
      }
    }

    async function processMessage(msg) {
      const log = document.getElementById("chat-log");
      log.innerHTML += `<div><strong>ЁЯСитАНЁЯМ╛:</strong> ${msg}</div>`;
      let reply = "рдорд╛рдл рдХрд░реЗрдВ, рдореИрдВ рд╕рдордЭ рдирд╣реАрдВ рдкрд╛рдпрд╛ред";
      const lower = msg.toLowerCase();
      if (lower.includes("ok") || lower.includes("plant") || lower.includes("рдХреИрд╕рд╛")) reply = await getPlantStatus();
      log.innerHTML += `<div><strong>ЁЯдЦ:</strong> ${reply}</div>`;
      log.scrollTop = log.scrollHeight;
    }

    document.getElementById("chat-send").onclick = async () => {
      const input = document.getElementById("chat-input");
      if (input.value.trim()) { await processMessage(input.value.trim()); input.value = ""; }
    };

    window.addEventListener("load", () => {
      const bot = document.getElementById("chatbot");
      setTimeout(() => {
        bot.style.bottom = "20px";
        document.getElementById("chat-log").innerHTML =
          `<div><strong>ЁЯдЦ:</strong> рдирдорд╕реНрддреЗ рдХрд┐рд╕рд╛рди рдЬреА! рдХреНрдпрд╛ рдЖрдк рдЬрд╛рдирдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХрд╛ рдкреМрдзрд╛ рдХреИрд╕рд╛ рд╣реИ?</div>`;
      }, 1500);
    });

    document.getElementById("minimize-btn").onclick = () => {
      document.getElementById("chatbot").style.bottom = "-400px";
      setTimeout(() => document.getElementById("chat-bubble").style.display = "block", 800);
    };
    document.getElementById("chat-bubble").onclick = () => {
      document.getElementById("chat-bubble").style.display = "none";
      document.getElementById("chatbot").style.bottom = "20px";
    };
  </script>
</body>
</html>
